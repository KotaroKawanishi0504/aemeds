import Accordion from"./accordion.min.js";import{setLanguageLink}from"./language-link.min.js";import Megamenu from"./megamenu.min.js";import{updateViewportUnit}from"./viewport-unit.min.js";class MarubeniHeader extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.shadowRoot,t=document.createElement("link");t.addEventListener("load",()=>this.style.setProperty("visibility","visible")),e.append(Object.assign(t,{href:`${this.previousElementSibling.href.split("/common/stylesheets/")[0]}/common/stylesheets/header.min.css`,rel:"stylesheet"}),this.querySelector("template").content.cloneNode(!0)),new ResizeObserver(()=>{this.closest("html").style.setProperty("--header-height",e.querySelector(".l-header").getBoundingClientRect().height)}).observe(this),window.addEventListener("DOMContentLoaded",()=>setLanguageLink(e)),(()=>{new Megamenu(e.querySelector(".l-header__content"),{delay:100});const t=document.body.getAttribute("data-directory");t&&e.querySelectorAll(`[data-directory='${t}']`).forEach(e=>e.setAttribute("data-current",""))})(),(()=>{let t=null,n=null;function r(r){if(t.close(e.querySelector(".l-header__menu")),r.matches)n?.disconnect(),e.querySelector(".l-header__content").removeAttribute("hidden");else{const t=e.querySelector(".l-header__menu"),r=e.querySelector(".l-header__content");n=new MutationObserver(()=>document.documentElement.toggleAttribute("data-scroll-lock-mobile","true"===t.getAttribute("aria-expanded"))),n.observe(t,{attributeFilter:["aria-expanded"]}),r.setAttribute("hidden","until-found")}}!function(){t=new Accordion(e.querySelector(".l-header"),{selector:{content:".l-header__content",trigger:".l-header__menu"}});const n=window.matchMedia("(width >= 900px)");n.addEventListener("change",r),r(n)}()})(),window.addEventListener("resize",()=>updateViewportUnit(this)),updateViewportUnit(this)}}customElements.define("marubeni-header",MarubeniHeader);