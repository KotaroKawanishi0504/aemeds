import Disclosure from"./disclosure.min.js";import MicroModal from"https://esm.sh/micromodal";import{setScroll}from"./scroll.min.js";import Swiper from"https://esm.sh/swiper@11/swiper-bundle";import Tabs from"./tabs.min.js";import{updateViewportUnit}from"./viewport-unit.min.js";(()=>{const e=document.querySelectorAll('[data-js="aside-carousel"]');if(!e.length)return;let t=[],o={spaceBetween:32};function n(n){n.matches?e.forEach((e,n)=>{const l=e.querySelectorAll(".swiper-slide").length>e.getAttribute("data-slides-per-view"),i=e.getAttribute("data-slides-per-view");l||e.querySelector(".c-card-list").setAttribute("data-columns-desktop",i);const r=e.closest(".l-aside__block");o={...o,loop:l,navigation:{nextEl:r.querySelector(".swiper-button-next"),prevEl:r.querySelector(".swiper-button-prev")},slidesPerView:i};const s=t[n]=new Swiper(e,o);s.on("init",a),s.on("resize",a),s.on("slideChange",a),s.init()}):t.length&&(t.forEach(e=>e.destroy(!1,!0)),t=[])}function a(){t.forEach(e=>{e.params.spaceBetween=3.2*parseFloat(window.getComputedStyle(document.documentElement).getPropertyValue("font-size"));const t=e.slides[0].querySelector("img").getBoundingClientRect(),o=t.top-e.el.closest(".l-aside__block").getBoundingClientRect().top+t.height/2;[e.navigation.prevEl,e.navigation.nextEl].forEach(e=>e.style.setProperty("--swiper-navigation-top-offset",`${o}px`)),e.slides.forEach((t,o)=>t.querySelector("a")?.setAttribute("tabindex",o===e.activeIndex?"0":"-1"))})}"ja"===document.documentElement.lang&&(o={...o,a11y:{nextSlideMessage:"次のスライドへ",prevSlideMessage:"前のスライドへ"}}),function(){e.forEach(e=>e.insertAdjacentHTML("afterend",'<div class="swiper-button-prev"></div><div class="swiper-button-next"></div>'));const t=window.matchMedia("(width >= 900px)");t.addEventListener("change",n),n(t)}()})(),document.querySelectorAll('[data-js="disclosure"]').forEach(e=>new Disclosure(e)),Fancybox.bind("[data-fancybox]",{Carousel:{Thumbs:!1,Toolbar:{display:{left:[],middle:[],right:["close"]}},Zoomable:{Panzoom:{maxScale:"cover",mouseMoveFactor:1.1,panMode:"mousemove"}}},Hash:!1,hideScrollbar:!1,zoomEffect:!1}),(()=>{const e=document.querySelectorAll("figure:has(img[width]), .p-news-release figure");function t(){e.forEach(e=>{e.style.removeProperty("width"),e.style.width=`${Math.min(e.querySelector("img").clientWidth,e.closest(".c-article, .l-main").clientWidth)}px`})}e.length&&(e.forEach(e=>{const o=e.querySelector("img");o.complete?t():o.addEventListener("load",t)}),new ResizeObserver(t).observe(document.documentElement))})(),(()=>{const e=document.querySelectorAll(".c-icon-link:not(.-simple)");e.length&&(e.forEach(e=>{e.insertAdjacentHTML("afterbegin",'<i aria-hidden="true" class="c-icon-link__icon"><svg><circle cx="50%" cy="50%" r="50%"></circle></svg></i>')}),new ResizeObserver(function(){document.querySelectorAll(".c-icon-link__icon").forEach(e=>{const t=10*parseFloat(window.getComputedStyle(e).getPropertyValue("--icon-size")),o=document.documentElement.style.getPropertyValue("--vw"),n=window.matchMedia("(width >= 900px)").matches?Math.min(o/12.8,1):o/3.93;e.style.setProperty("--c",t*n*Math.PI),e.querySelector("circle").setAttribute("r",t/2*n-1)})}).observe(document.documentElement))})(),(()=>{function e(e){e.classList.add(e.naturalWidth>e.naturalHeight?"-landscape":"-portrait")}document.querySelectorAll('[data-js="image-orientation"]').forEach(t=>{t.complete?e(t):t.addEventListener("load",()=>e(t))})})(),document.querySelectorAll('[data-js="inline-video"], [data-js="inline-video-link"]').forEach(e=>{const t=e.matches('[data-js="inline-video-link"]');if(!t){const t=e.querySelector(".c-inline-video__link");t.addEventListener("click",e=>{e.preventDefault();const o=t.href;if(/youtube.com/.test(o))t.replaceWith(Object.assign(document.createElement("iframe"),{allow:"autoplay",allowFullscreen:!0,className:"c-inline-video__iframe",src:`https://www.youtube.com/embed/${o.split("v=")[1]}?autoplay=1&rel=0`}));else{const e=Object.assign(document.createElement("video"),{className:"c-inline-video__video",controls:!0,muted:!0,playsinline:!0,preload:"none"}),n=document.createElement("source");n.src=o,e.appendChild(n),t.replaceWith(e),e.load(),e.play()}})}const o=t?e:e.querySelector(".c-inline-video__fallback a");o&&(o.setAttribute("data-micromodal-trigger","inline-video-modal"),o.addEventListener("click",e=>{e.preventDefault()}),o.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(".l-modal__content video");t.querySelector("source").src=e.currentTarget.getAttribute("href"),t.load(),t.play()}),document.body.insertAdjacentHTML("beforeend",`<div aria-hidden="true" class="l-modal" id="inline-video-modal">\n        <div class="l-modal__overlay" data-micromodal-close tabindex="-1">\n          <div aria-labelledby="modal-title" aria-modal="true" class="l-modal__container" role="dialog">\n            <button aria-label="${"ja"===document.documentElement.lang?"閉じる":"Close"}" class="l-modal__close" data-micromodal-close></button>\n            <div class="l-modal__inner">\n              <main class="l-modal__content">\n                <h1 class="u-visually-hidden" id="modal-title">${"ja"===document.documentElement.lang?"動画":"Video"}</h1>\n                <video controls muted playsinline preload="none">\n                  <source src="" type="video/mp4">\n                </video>\n              </main>\n            </div>\n          </div>\n        </div>\n      </div>`))}),document.querySelectorAll(".l-main :is(ol, ul[data-marker])").forEach(e=>{e.style.setProperty("--marker",`"${e.getAttribute("data-marker")||""}"`),e.style.setProperty("--marker-prefix",`"${e.getAttribute("data-marker-prefix")||""}"`),e.style.setProperty("--marker-suffix",`"${e.hasAttribute("data-marker-suffix")?e.getAttribute("data-marker-suffix"):"."}"`)}),(()=>{const e=document.querySelector(".l-local-navigation");function t(){document.documentElement.style.setProperty("--scroll-padding-top-offset",e.offsetHeight)}e&&(new ResizeObserver(t).observe(e),t())})(),MicroModal.init({awaitCloseAnimation:!0,onClose:()=>{document.documentElement.removeAttribute("data-scroll-lock-desktop"),document.documentElement.removeAttribute("data-scroll-lock-mobile")},onShow:()=>{document.documentElement.setAttribute("data-scroll-lock-desktop",""),document.documentElement.setAttribute("data-scroll-lock-mobile","")}}),document.querySelectorAll('[data-js="no-context-menu"]').forEach(e=>{e.addEventListener("contextmenu",e=>e.preventDefault())}),(()=>{const e=location.search,t=location.hash.substring(1)||new URLSearchParams(e).get("id");t&&document.getElementById(t)&&(history.replaceState({},"",location.pathname+e),window.addEventListener("DOMContentLoaded",()=>{window.scrollTo(0,0),window.setTimeout(()=>{setScroll(`#${t}`)},100)}))})(),document.querySelectorAll('[data-js="scroll"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),setScroll(e.hash)})}),(()=>{const e=document.querySelectorAll('[data-js="slideshow-carousel"]');if(!e.length)return;let t=[];e.forEach((e,o)=>{const n=t[o]=new Swiper(e,{autoplay:{delay:4e3,disableOnInteraction:!1},loop:e.querySelectorAll(".swiper-slide").length>1,pagination:{el:".swiper-pagination",renderBullet:(e,t)=>`<span class="${t}"><span class="progress-bar"></span></span>`},roundLengths:!0,spaceBetween:1});n.init(),n.el.querySelector(".swiper-pagination-bullet-active").classList.remove("swiper-pagination-bullet-active")})})(),document.querySelectorAll('[data-js="tabs"]').forEach(e=>{new Tabs(e,{animation:{content:{crossFade:!1,fade:!1}},selector:{content:"[data-tabs-content]",list:"[data-tabs-list]",panel:"[data-tabs-panel]",tab:"[data-tabs-tab]"}})}),["DOMContentLoaded","resize"].forEach(e=>window.addEventListener(e,()=>updateViewportUnit())),window.addEventListener("DOMContentLoaded",()=>{window.setTimeout(()=>{document.body.setAttribute("data-ready","")})});